# Agentic AI å››å¤§å®šåˆ¶åŒ–æ ¸å¿ƒæ¦‚å¿µ: Rulesã€Instructionsã€Workflows ä¸ Skills å®Œå…¨æŒ‡å—

è¿™ä»½æŒ‡å—å°†å¸®åŠ©ä½ æ·±å…¥ç†è§£å¹¶æŒæ¡ Google Antigravity (Agentic AI) çš„å››å¤§æ ¸å¿ƒå®šåˆ¶åŒ–æ¦‚å¿µï¼š**Custom Agent Rules (è‡ªå®šä¹‰è§„åˆ™)**ã€**Instructions (æŒ‡ä»¤)**ã€**Workflows (å·¥ä½œæµ)** å’Œ **Skills (æŠ€èƒ½)**ï¼Œå¹¶é€šè¿‡å®é™…æ“ä½œæ¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚

> [!TIP]
> **é˜…è¯»å»ºè®®**ï¼šå»ºè®®å…ˆé˜…è¯»ã€Œæ ¸å¿ƒæ¦‚å¿µæ¦‚è§ˆã€å»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œç„¶åé€šè¿‡ã€ŒQuick Startã€ç« èŠ‚è¿›è¡Œå®æˆ˜ç»ƒä¹ ã€‚

---

## æ ¸å¿ƒæ¦‚å¿µæ¦‚è§ˆ

åœ¨ä¸ AI Agent åä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸åŒå±‚çº§çš„æœºåˆ¶æ¥æ§åˆ¶å…¶è¡Œä¸ºï¼š

| æ¦‚å¿µ | ä½œç”¨èŒƒå›´ | ç”Ÿå‘½å‘¨æœŸ | Role (LLM) | å…¸å‹ç”¨é€” |
| :--- | :--- | :--- | :--- | :--- |
| **Agent Rules** | å…¨å±€ (Global) | é•¿æœŸæœ‰æ•ˆ (Persistent) | `system` | è®¾å®šç¼–ç é£æ ¼ã€ç¦æ­¢äº‹é¡¹ã€ç‰¹å®šæŠ€æœ¯æ ˆåå¥½ |
| **Instructions** | ä¼šè¯/ä»»åŠ¡ (Session) | å•æ¬¡äº¤äº’æˆ–ä»»åŠ¡æœŸé—´ | `user` | æŒ‡æŒ¥å…·ä½“ä»»åŠ¡æ‰§è¡Œã€ä¸Šä¸‹æ–‡è¡¥å…… |
| **Workflows** | ä¼šè¯ (Session) | æŒ‰éœ€è§¦å‘ (On-Demand) | `user` | ä¿å­˜çš„æç¤ºè¯æ¨¡æ¿ã€å¯é‡å¤çš„å¤šæ­¥éª¤æµç¨‹ |
| **Skills** | èƒ½åŠ›æ‰©å±• (Capability) | æŒ‰éœ€åŠ è½½ (On-Demand) | `system` (åŠ¨æ€) | å°è£…å¤æ‚æµç¨‹ã€ç‰¹å®šé¢†åŸŸçŸ¥è¯†ã€è‡ªå®šä¹‰å·¥å…·é“¾ |

---

### ä¸»æµ AI ç¼–ç¨‹å·¥å…·æ”¯æŒæƒ…å†µ

| æ¦‚å¿µ | Google Antigravity | Claude Code | OpenAI Codex CLI |
| :--- | :--- | :--- | :--- |
| **Agent Rules** | âœ… å®Œæ•´æ”¯æŒ <br> `~/.gemini/GEMINI.md` (å…¨å±€) <br> `.agent/rules/*.md` (å·¥ä½œåŒº) | âœ… å®Œæ•´æ”¯æŒ <br> `~/.claude/CLAUDE.md` (å…¨å±€) <br> `.claude/settings.json` (é¡¹ç›®çº§) | âœ… å®Œæ•´æ”¯æŒ <br> `~/.codex/instructions.md` (å…¨å±€) <br> `codex.md` / `AGENTS.md` (é¡¹ç›®çº§) |
| **Instructions** | âœ… Chat Panel (`Cmd+L`) <br> âœ… Inline Edit (`Cmd+I`) | âœ… å¯¹è¯å¼äº¤äº’ <br> âœ… `/` å‘½ä»¤è§¦å‘ | âœ… ç»ˆç«¯äº¤äº’å¼å¯¹è¯ <br> âœ… æ”¯æŒ `-q` å¿«é€Ÿæé—®æ¨¡å¼ |
| **Workflows** | âœ… å®Œæ•´æ”¯æŒ <br> `.agent/workflows/*.md` <br> é€šè¿‡ `/slash-command` è§¦å‘ | âš ï¸ éƒ¨åˆ†æ”¯æŒ <br> é€šè¿‡ `/` å‘½ä»¤å®ç°ç±»ä¼¼åŠŸèƒ½ | âŒ æš‚ä¸æ”¯æŒ <br> éœ€é€šè¿‡ Instructions æ‰‹åŠ¨è§¦å‘ |
| **Skills** | âœ… å®Œæ•´æ”¯æŒ <br> `.agent/skills/*/SKILL.md` <br> æ”¯æŒè„šæœ¬ã€æ¨¡æ¿ã€èµ„æºæ–‡ä»¶ | âœ… å®Œæ•´æ”¯æŒ <br> é€šè¿‡ MCP åè®®åŠ¨æ€åŠ è½½å·¥å…·ä¸æ‰©å±•èƒ½åŠ› | âš ï¸ é€šè¿‡ `AGENTS.md` å®šä¹‰å¤šè§’è‰²ä»£ç† <br> æ”¯æŒæ²™ç›’åŒ–æ‰§è¡Œ |

> [!NOTE]
> **é…ç½®è·¯å¾„å·®å¼‚**ï¼šä¸‰æ¬¾å·¥å…·çš„é…ç½®è·¯å¾„å’Œæ–‡ä»¶æ ¼å¼ä¸åŒï¼Œä½†æ ¸å¿ƒç†å¿µç›¸ä¼¼ã€‚æœ¬æŒ‡å—ä»¥ **Google Antigravity** ä¸ºä¸»è¿›è¡Œè®²è§£ã€‚
>
> **MCP ä¸ Skills çš„å…³ç³»**ï¼šMCP (Model Context Protocol) æ˜¯ Anthropic æå‡ºçš„å¼€æ”¾åè®®ï¼Œæ—¨åœ¨æ ‡å‡†åŒ– AI ä¸å¤–éƒ¨å·¥å…·/æ•°æ®æºçš„è¿æ¥æ–¹å¼ã€‚Skills æ˜¯ Antigravity çš„åŸç”Ÿèƒ½åŠ›æ‰©å±•æœºåˆ¶ï¼Œä¸¤è€…ç›®æ ‡ç›¸ä¼¼ä½†å®ç°ä¸åŒï¼š
>
> - **Skills**ï¼šé€šè¿‡ Markdown æ–‡ä»¶å®šä¹‰æµç¨‹ï¼Œæ›´è½»é‡ã€æ˜“äºç¼–å†™ï¼Œé€‚åˆå°è£…å†…éƒ¨ SOP
> - **MCP**ï¼šé€šè¿‡æ ‡å‡†åŒ–åè®®è¿æ¥å¤–éƒ¨æœåŠ¡ï¼Œæ›´é€‚åˆé›†æˆç¬¬ä¸‰æ–¹å·¥å…·ï¼ˆå¦‚æ•°æ®åº“ã€APIï¼‰
>
> **ç¤¾åŒºè¯„ä»·**ï¼šç›®å‰å¼€å‘è€…ç¤¾åŒºæ™®éè®¤ä¸º **Antigravity çš„ Skills + Workflows ä½“ç³»æœ€ä¸ºå®Œå–„**ï¼Œé…ç½®ç®€å•ä¸”å¼€ç®±å³ç”¨ï¼›Claude Code çš„ MCP ç”Ÿæ€æ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œç¬¬ä¸‰æ–¹å·¥å…·æ”¯æŒä¸°å¯Œï¼›Codex CLI ä½œä¸ºåæ¥è€…ï¼ŒåŠŸèƒ½ç›¸å¯¹ç²¾ç®€ä½†æ²™ç›’å®‰å…¨æ€§è¾ƒé«˜ã€‚

---

## 1. Custom Agent Rules (è‡ªå®šä¹‰ä»£ç†è§„åˆ™)

**â€œå®ªæ³•â€ä¸â€œè¡Œä¸ºå‡†åˆ™â€**

Rules æ˜¯ä½ èµ‹äºˆ Agent çš„åŸºç¡€è®¾å®šã€‚å®ƒä»¬å°±åƒæ˜¯ Agent çš„â€œæ½œæ„è¯†â€ï¼Œåœ¨æ¯ä¸€æ¬¡æ€è€ƒå’Œè¡ŒåŠ¨ä¸­éƒ½ä¼šç”Ÿæ•ˆã€‚

### æ€ä¹ˆæ“ä½œï¼Ÿ

åœ¨ **Google Antigravity** ä¸­ï¼ŒRules é…ç½®æ–‡ä»¶åˆ†ä¸ºä¸¤ä¸ªå±‚çº§ï¼š

| ç±»å‹ | è·¯å¾„ | ä½œç”¨èŒƒå›´ |
| :--- | :--- | :--- |
| **Global Rules** | `~/.gemini/GEMINI.md` | æ‰€æœ‰é¡¹ç›® (å…¨å±€) |
| **Workspace Rules** | `your-project/.agent/rules/*.md` | å½“å‰å·¥ä½œåŒº (é¡¹ç›®çº§) |

> [!TIP]
> å¦‚ä½•å¿«é€Ÿåˆ›å»º Global Rulesï¼š
>
> 1. æ‰“å¼€ Agent Chat çª—å£ã€‚
> 2. ç‚¹å‡» **Customizations** (å®šåˆ¶) éƒ¨åˆ†ã€‚
> 3. ç‚¹å‡» **+ Global**ã€‚
> 4. ç¼–è¾‘è‡ªåŠ¨åˆ›å»ºçš„ `~/.gemini/GEMINI.md` æ–‡ä»¶å³å¯ã€‚

**Workspace Rules æ¿€æ´»æ–¹å¼**ï¼š

- **Always On**ï¼šå§‹ç»ˆç”Ÿæ•ˆã€‚
- **Manual**ï¼šæ‰‹åŠ¨æ¿€æ´»ã€‚
- **Model Decision**ï¼šç”± Agent è‡ªè¡Œåˆ¤æ–­æ˜¯å¦åº”ç”¨ã€‚
- **Glob Pattern**ï¼šåŒ¹é…ç‰¹å®šæ–‡ä»¶ç±»å‹æ—¶ç”Ÿæ•ˆ (å¦‚ `*.py`)ã€‚

### ç¼–å†™æœ€ä½³å®è·µ

- **æ˜ç¡®æ€§**ï¼šä¸è¦è¯´â€œå†™å¥½ä»£ç â€ï¼Œè¦è¯´â€œä½¿ç”¨ TypeScriptï¼Œä¸¥æ ¼éµå¾ª Airbnb é£æ ¼æŒ‡å—â€ã€‚
- **å¦å®šå¼**ï¼šæ˜ç¡®æŒ‡å‡ºâ€œä¸è¦åšä»€ä¹ˆâ€ã€‚
  - *ä¾‹*ï¼šâ€œä¸è¦ä½¿ç”¨ `JQuery`ï¼Œåªä½¿ç”¨åŸç”Ÿ DOM APIã€‚â€
  - *ä¾‹*ï¼šâ€œæ¶‰åŠæ•°æ®åº“æ“ä½œæ—¶ï¼Œ**ä¸è¦**ç›´æ¥æ‹¼æ¥ SQLï¼Œå¿…é¡»ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ã€‚â€
- **èº«ä»½è®¾å®š**ï¼š
  - *ä¾‹*ï¼šâ€œä½ æ˜¯ä¸€ä¸ªèµ„æ·± Rust ç³»ç»Ÿå·¥ç¨‹å¸ˆï¼Œå…³æ³¨å†…å­˜å®‰å…¨å’Œé›¶æ‹·è´ä¼˜åŒ–ã€‚â€

### ç¤ºä¾‹é…ç½®

```markdown
# General
- å§‹ç»ˆä½¿ç”¨ä¸­æ–‡å›å¤ï¼Œé™¤éè¢«è¦æ±‚ç¿»è¯‘ã€‚
- ä»£ç æ³¨é‡Šå¿…é¡»æ¸…æ™°ï¼Œè§£é‡Šâ€œä¸ºä»€ä¹ˆâ€è€Œä¸æ˜¯â€œæ˜¯ä»€ä¹ˆâ€ã€‚

# Tech Stack
- Frontend: React 18+, TailwindCSS, Vite.
- Backend: Python 3.11, FastAPI.

# Constraints
- ç¦æ­¢ä½¿ç”¨ `any` ç±»å‹ (TypeScript)ã€‚
- æ‰€æœ‰çš„å¼‚æ­¥æ“ä½œå¿…é¡»ä½¿ç”¨ `async/await`ï¼Œç¦æ­¢ `.then()` é“¾å¼è°ƒç”¨ã€‚
```

---

## 2. Instructions (æŒ‡ä»¤)

**â€œæŒ‡æŒ¥æ£’â€ä¸â€œå…·ä½“å‘½ä»¤â€**

Instructions æ˜¯ä½ ä¸ Agent äº¤äº’çš„**åŠ¨æ€æŒ‡ä»¤**ã€‚åœ¨ IDE ç¯å¢ƒä¸­ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ ¸å¿ƒè¾“å…¥æ¨¡å¼ï¼Œå®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š

| æ¨¡å¼ | å¿«æ·é”® | åœºæ™¯ | ç‰¹ç‚¹ |
| :--- | :--- | :--- | :--- |
| **Chat Panel (å¯¹è¯æ¡†)** | `Cmd+L` | é—®ç­”ã€ç­–åˆ’ã€å¯»æ±‚è§£é‡Š | **Scope: Session**. å°±åƒåœ¨è·ŸåŒäº‹èŠå¤©ï¼Œä¸Šä¸‹æ–‡æ˜¯æ•´ä¸ªå¯¹è¯å†å²ã€‚ |
| **Inline Edit (å†…è”ç¼–è¾‘)** | `Cmd+I` / `Cmd+K` | æ”¹ä»£ç ã€ç”Ÿæˆä»£ç  | **Scope: Selection**. å°±åƒåœ¨æŒ‡ç€å±å¹•è¯´â€œæ”¹è¿™è¡Œâ€ï¼Œä¸Šä¸‹æ–‡èšç„¦äºå½“å‰å…‰æ ‡æˆ–é€‰ä¸­çš„ä»£ç å—ã€‚ |

**ä¸¤è€…çš„æœ¬è´¨åŒºåˆ«**ï¼š

- **Chat** åå‘äº *Consultation* (å’¨è¯¢/è§„åˆ’)ã€‚
- **Inline** åå‘äº *Action* (ç›´æ¥è¡ŒåŠ¨/ä¿®æ”¹)ã€‚

### é«˜çº§æ“ä½œæŠ€å·§

- **Contextualize (æä¾›ä¸Šä¸‹æ–‡)**ï¼š
  - *Bad*: â€œå¸®æˆ‘æ”¹ä¸€ä¸‹è¿™ä¸ªé”™ã€‚â€
  - *Good*: â€œæˆ‘æ­£åœ¨çœ‹ `utils.py` çš„ç¬¬ 45 è¡Œï¼Œè¿™ä¸ª `parse_date` å‡½æ•°è§£æ ISO8601 æ ¼å¼æŠ¥é”™ï¼Œè¯·åŸºäºå½“å‰æ‰“å¼€çš„æ–‡ä»¶ä¿®å¤å®ƒã€‚â€
- **Task Breakdown (ä»»åŠ¡æ‹†è§£æŠ€å·§)**ï¼š
  - **Bad**: "é‡æ„ä¸€ä¸‹è®¤è¯æ¨¡å—ã€‚" (å¤ªæ¨¡ç³Šï¼ŒAgent å¯èƒ½ä¼šéšæœºå‘æŒ¥)
  - **Good (Step-by-Step)**:
    > "è¯·é‡æ„ `auth.ts` æ¨¡å—ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œï¼š
    > 1. å°† `verifyToken` å‡½æ•°æå–åˆ°æ–°çš„ `validators.ts` æ–‡ä»¶ä¸­ã€‚
    > 2. å°† Session å­˜å‚¨æ–¹å¼ä» `localStorage` æ”¹ä¸º `Cookies`ã€‚
    > 3. å¹¶åœ¨ `login` ç»„ä»¶ä¸­æ›´æ–°è°ƒç”¨é€»è¾‘ã€‚
    > 4. å®Œæˆåï¼Œè¿è¡Œæµ‹è¯•ç¡®ä¿æ²¡æœ‰ç ´åç°æœ‰åŠŸèƒ½ã€‚"
  - *æŠ€å·§*ï¼šä½¿ç”¨åºå·åˆ—è¡¨ (1. 2. 3.) æ˜ç¡®æ‰§è¡Œé¡ºåºã€‚
- **Chain of Thought (æ€ç»´é“¾è§¦å‘)**ï¼š
  - *ä¾‹*ï¼šâ€œåœ¨å†™ä»£ç ä¹‹å‰ï¼Œå…ˆåˆ†æä¸€ä¸‹è¿™ä¼šå¯¹ç°æœ‰çš„ Authentication æ¨¡å—äº§ç”Ÿä»€ä¹ˆå½±å“ã€‚â€

---

## 3. Workflows (å·¥ä½œæµ)

**"ä¿å­˜çš„æç¤ºè¯"ä¸"å¿«æ·æŒ‡ä»¤"

Workflows æ˜¯ä½ é¢„å…ˆå®šä¹‰çš„**æç¤ºè¯æ¨¡æ¿**æˆ–**å¤šæ­¥éª¤æŒ‡ä»¤åºåˆ—**ã€‚å®ƒä»¬å°±åƒâ€œå¿«æ·é”®â€ï¼Œè®©ä½ æ— éœ€æ¯æ¬¡éƒ½æ‰‹åŠ¨è¾“å…¥é‡å¤çš„æŒ‡ä»¤ã€‚

### è·¯å¾„é…ç½®

| ç±»å‹ | è·¯å¾„ | ä½œç”¨èŒƒå›´ |
| :--- | :--- | :--- |
| **Workspace Workflows** | `your-project/.agent/workflows/*.md` | å½“å‰é¡¹ç›® |
| **Global Workflows** | `~/.gemini/antigravity/global_workflows/*.md` | æ‰€æœ‰é¡¹ç›® |

### Workflow æ–‡ä»¶æ ¼å¼

Workflow æ–‡ä»¶ä½¿ç”¨ Markdown æ ¼å¼ + YAML Frontmatterï¼š

```markdown
---
description: [ç®€çŸ­æè¿°ï¼Œå¦‚: éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ]
---
[å…·ä½“æ­¥éª¤æŒ‡ä»¤]
```

### å®æˆ˜æ¡ˆä¾‹ï¼šåˆ›å»º "deploy-staging" Workflow

**File: `.agent/workflows/deploy-staging.md`**

```markdown
---
description: éƒ¨ç½²åˆ° Staging ç¯å¢ƒ
---
1. è¿è¡Œ `npm run build` æ„å»ºç”Ÿäº§åŒ…ã€‚
2. è¿è¡Œ `npm run test` ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡ã€‚
3. è¿è¡Œ `./scripts/deploy.sh staging` éƒ¨ç½²åˆ° Stagingã€‚
4. å®Œæˆåé€šçŸ¥ç”¨æˆ·ã€‚
```

### ä½¿ç”¨æ–¹å¼

åœ¨å¯¹è¯ä¸­ä½¿ç”¨ **Slash Command** è§¦å‘ï¼š

```bash
/deploy-staging
```

Agent ä¼šè‡ªåŠ¨è¯»å–å¹¶æ‰§è¡Œå·¥ä½œæµä¸­å®šä¹‰çš„æ­¥éª¤ã€‚

> [!TIP]
> **turbo æ³¨è§£**ï¼šåœ¨æ­¥éª¤å‰æ·»åŠ  `// turbo` å¯ä»¥è®©è¯¥å‘½ä»¤è‡ªåŠ¨æ‰§è¡Œ (æ— éœ€ç”¨æˆ·ç¡®è®¤)ã€‚
> åœ¨æ–‡ä»¶ä»»æ„ä½ç½®æ·»åŠ  `// turbo-all` å¯è®©æ‰€æœ‰æ­¥éª¤è‡ªåŠ¨æ‰§è¡Œã€‚

---

## 4. Skills (æŠ€èƒ½)

**"å·¥å…·ç®±"ä¸"æ‰©å±•æ¨¡ç»„"**

Skills æ˜¯ Antigravity æœ€å¼ºå¤§çš„æ‰©å±•æœºåˆ¶ã€‚å®ƒå…è®¸ä½ å°†ä¸€å¥—å¤æ‚çš„æµç¨‹ã€çŸ¥è¯†æˆ–è„šæœ¬å°è£…æˆä¸€ä¸ªâ€œæŠ€èƒ½åŒ…â€ï¼Œè®© Agent å­¦ä¼šæ–°æœ¬äº‹ã€‚

### Skill çš„ç»“æ„

ä¸€ä¸ªæ ‡å‡†çš„ Skill é€šå¸¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ŒåŒ…å«ï¼š

1. **`SKILL.md` (æ ¸å¿ƒ)**ï¼šæŠ€èƒ½çš„â€œè¯´æ˜ä¹¦â€ã€‚
2. **`scripts/` (å¯é€‰)**ï¼šè¾…åŠ©è„šæœ¬ï¼ˆPython, Bash ç­‰ï¼‰ã€‚
3. **`resources/` (å¯é€‰)**ï¼šæ¨¡æ¿æ–‡ä»¶ã€å‚è€ƒæ–‡æ¡£ã€‚

### `SKILL.md` æ€ä¹ˆå†™ï¼Ÿ

è¿™æ˜¯ Agent é˜…è¯»çš„æ–‡ä»¶ï¼Œéœ€è¦ç”¨ Markdown ç¼–å†™ï¼Œé€šè¿‡ YAML Frontmatter å®šä¹‰å…ƒæ•°æ®ã€‚

#### æ¨¡æ¿ç»“æ„

```markdown
---
name: [æŠ€èƒ½åç§°ï¼Œå¦‚: daily-report-generator]
description: [ç®€çŸ­æè¿°ï¼Œå¦‚: ç”Ÿæˆæ¯æ—¥å·¥ç¨‹è¿›åº¦æŠ¥å‘Š]
---

# Instructions
(è¯¦ç»†å‘Šè¯‰ Agent å¦‚ä½•æ‰§è¡Œè¿™ä¸ªæŠ€èƒ½)

1. **Step 1: Gather Info**
   - Run command `git log --since="yesterday"` to get updates.
   - Read file `task.md` to update status.

2. **Step 2: Generate Report**
   - Use the template in `resources/template.md`.
   - Summarize the git logs.

3. **Step 3: Save**
   - Save the file to `reports/YYYY-MM-DD.md`.
```

### å…·ä½“æ“ä½œæµç¨‹

1. **åˆ›å»ºæ–‡ä»¶å¤¹**ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `.agent/skills/` ç›®å½•å’ŒæŠ€èƒ½æ–‡ä»¶å¤¹ï¼š

   ```bash
   mkdir -p .agent/skills/code-review-pro
   ```

2. **ç¼–å†™å®šä¹‰**ï¼šåœ¨æŠ€èƒ½æ–‡ä»¶å¤¹ä¸­åˆ›å»º `SKILL.md`ï¼Œå†™ä¸‹ä½ å¸Œæœ› Agent éµå¾ªçš„ SOP (æ ‡å‡†ä½œä¸šç¨‹åº)ã€‚

3. **ä½¿ç”¨æŠ€èƒ½**ï¼šå‚è€ƒä¸‹æ–¹çš„è§¦å‘æ–¹å¼è¡¨æ ¼ã€‚

### Skill çš„è§¦å‘æ–¹å¼

| æ–¹å¼ | è¯´æ˜ | ç¤ºä¾‹ |
| :--- | :--- | :--- |
| **æ‰‹åŠ¨è°ƒç”¨** | åœ¨å¯¹è¯ä¸­æ˜ç¡®è¦æ±‚ä½¿ç”¨æŸä¸ªæŠ€èƒ½ | "ä½¿ç”¨ `code-review-pro` æŠ€èƒ½æ¥å®¡æŸ¥å½“å‰ PR" |
| **è‡ªåŠ¨æ£€ç´¢** | Agent æ ¹æ®ä»»åŠ¡è¯­ä¹‰è‡ªåŠ¨åŒ¹é…ç›¸å…³ Skill | å½“ä½ è¯´"å¸®æˆ‘åšä»£ç è¯„å®¡"ï¼ŒAgent å¯èƒ½è‡ªåŠ¨åŠ è½½ç›¸å…³ Skill |
| **ä¸Šä¸‹æ–‡è§¦å‘** | Skill çš„ description åŒ…å«è§¦å‘å…³é”®è¯ | `description: ä»£ç å®¡æŸ¥ã€Code Reviewã€PR è¯„å®¡` |

> [!NOTE]
> **Skill vs Workflow çš„é€‰æ‹©**ï¼š
>
> - å¦‚æœåªæ˜¯ç®€å•çš„å¤šæ­¥éª¤å‘½ä»¤åºåˆ— â†’ ä½¿ç”¨ **Workflow**
> - å¦‚æœéœ€è¦å¤æ‚é€»è¾‘ã€è„šæœ¬ã€æ¨¡æ¿æ–‡ä»¶ â†’ ä½¿ç”¨ **Skill**

### å®æˆ˜æ¡ˆä¾‹ï¼šåˆ›å»ºä¸€ä¸ª "Deploy-Check" Skill

å‡è®¾ä½ æ¯æ¬¡éƒ¨ç½²å‰éƒ½è¦æ£€æŸ¥ 3 ä¸ªé…ç½®æ–‡ä»¶å’Œ 1 ä¸ªæ•°æ®åº“çŠ¶æ€ã€‚

**File: `skills/deploy-check/SKILL.md`**

```markdown
---
name: deploy-check
description: å®‰å…¨éƒ¨ç½²å‰çš„æ£€æŸ¥æ¸…å•æµç¨‹
---

# Deploy Pre-flight Check

When verify deployment readiness, follow these steps strictly:

1. **Check Environment Variables**
   - View file `.env.example` and ensure the user has a corresponding `.env`.
   - WARNING: Do not read the actual `.env` content unless explicitly asked (security).

2. **Verify Database Migration**
   - Run command `npm run prisma:status` to check for pending migrations.
   - If output contains "Pending", STOP and notify user.

3. **Run Lint**
   - Run `npm run lint`.
   - If errors exist, list them and ask user if we should proceed.
```

### 4.1 å·¥ç¨‹ç›®å½•ç»“æ„ç¤ºä¾‹

å°†ä¸Šè¿°æ¦‚å¿µæ˜ å°„åˆ°å®é™…çš„é¡¹ç›®æ–‡ä»¶ä¸­ï¼Œç»“æ„å¦‚ä¸‹ï¼š

```text
Project_Root/
â”œâ”€â”€ .env                     <-- (ç¯å¢ƒé…ç½®ï¼Œå‹¿æäº¤)
â”œâ”€â”€ src/                     <-- (æºç )
â”‚   â””â”€â”€ ...
â””â”€â”€ .agent/                  <-- (Agent é…ç½®ç›®å½•)
    â”œâ”€â”€ rules/               <-- (Rules) å·¥ä½œåŒºçº§è§„åˆ™
    â”‚   â”œâ”€â”€ coding-style.md  <-- ä¾‹ï¼šä»£ç é£æ ¼è§„èŒƒ
    â”‚   â””â”€â”€ security.md      <-- ä¾‹ï¼šå®‰å…¨çº¢çº¿
    â”œâ”€â”€ workflows/           <-- (Workflows) å¯è§¦å‘çš„å·¥ä½œæµ
    â”‚   â””â”€â”€ deploy.md
    â””â”€â”€ skills/              <-- (Skills) æŠ€èƒ½æ‰©å±•åŒ…
        â”œâ”€â”€ deploy-check/
        â”‚   â”œâ”€â”€ SKILL.md     <-- æŠ€èƒ½å®šä¹‰
        â”‚   â””â”€â”€ scripts/     <-- è¾…åŠ©è„šæœ¬
        â””â”€â”€ code-review/
            â””â”€â”€ SKILL.md

# å…¨å±€é…ç½®ï¼ˆç”¨æˆ·ç›®å½•ï¼‰
~/.gemini/
â”œâ”€â”€ GEMINI.md                <-- (Global Rules) å…¨å±€å®ªæ³•
â””â”€â”€ antigravity/
    â”œâ”€â”€ global_workflows/    <-- å…¨å±€å·¥ä½œæµ
    â””â”€â”€ skills/              <-- å…¨å±€æŠ€èƒ½
```

---

## 5. æ·±åº¦è§£æï¼šæŠ€æœ¯å®ç°æœºåˆ¶å¯¹æ¯”

ä¸ºäº†æ›´å¥½åœ°è®¾è®¡ Agent è¡Œä¸ºï¼Œæˆ‘ä»¬éœ€è¦ä»**è¿è¡Œæœºåˆ¶ (Runtime Mechanism)** çš„è§’åº¦æ¥ç†è§£è¿™ä¸‰è€…çš„åŒºåˆ«ã€‚

### ğŸ’¡ è¿›é˜¶ç†è§£ï¼šInstructions vs System Prompt

ä»åº•å±‚å®ç°æœºåˆ¶æ¥çœ‹ï¼š

1. **System Prompt (åŒ…å« Rules)**ï¼š
   - ä½äºä¸Šä¸‹æ–‡çª—å£çš„æœ€é¡¶ç«¯ (`role: system`)ã€‚
   - æƒé‡æœ€é«˜ï¼Œå®šä¹‰**è¾¹ç•Œ**å’Œ**èº«ä»½**ã€‚
   - *å°±åƒâ€œå‡ºå‚è®¾ç½®â€ + â€œé•¿æœŸå®ªæ³•â€ã€‚*

2. **Instructions**ï¼š
   - ä½äºä¸Šä¸‹æ–‡çª—å£çš„æœ€åº•ç«¯ (`role: user`)ã€‚
   - åˆ©ç”¨æ¨¡å‹çš„â€œè¿‘å› æ•ˆåº”â€ï¼Œå¼•å¯¼**å…·ä½“è¡ŒåŠ¨**ã€‚
   - *å°±åƒâ€œå³æ—¶å‘½ä»¤â€ã€‚*

### (B) System Prompt vs. Skills

è¿™æ˜¯**é€šç”¨å¤§è„‘**ä¸**å¤–æŒ‚æ’ä»¶**çš„åŒºåˆ«ã€‚

| ç‰¹æ€§ | System Prompt | Skills |
| :--- | :--- | :--- |
| **æœ¬è´¨** | **The "OS" (æ“ä½œç³»ç»Ÿ)** | **The "Apps" (åº”ç”¨ç¨‹åº)** |
| **ä¸Šä¸‹æ–‡ç®¡ç†** | å§‹ç»ˆåŠ è½½åœ¨ Context Window ä¸­ã€‚ | **On-Demand (æŒ‰éœ€åŠ è½½)** <br> åªæœ‰å½“éœ€è¦ç”¨åˆ°è¯¥æŠ€èƒ½æ—¶ï¼Œå…¶å†…å®¹æ‰ä¼šè¢«æ£€ç´¢å¹¶æ³¨å…¥åˆ° Context ä¸­ã€‚ |
| **è®¾è®¡å“²å­¦** | å®šä¹‰ Agent çš„â€œæ€§æ ¼â€å’Œâ€œåº•çº¿â€ã€‚ | å®šä¹‰ Agent çš„â€œå·¥ä½œæµâ€å’Œâ€œç‰¹å®šèƒ½åŠ›â€ã€‚ |
| **æ‰©å±•æ€§** | æœ‰é™ï¼ˆå—é™äº Context Window ä¸Šé™ï¼‰ã€‚ | **æ— é™**ï¼ˆå¯ä»¥æœ‰ 1000 ä¸ª Skillï¼Œä½†æ¯æ¬¡åªåŠ è½½ç›¸å…³çš„ 1 ä¸ªï¼‰ã€‚ |
| **Injection Role** | **`role: system` (Static)** <br> é™æ€å¸¸é©»ï¼Œä½œä¸ºä¼šè¯çš„â€œæ ¹åŸºâ€ã€‚ | **`role: system` (Dynamic)** <br> åŠ¨æ€æ³¨å…¥ï¼Œä½œä¸ºä¸´æ—¶çš„â€œé«˜ä¼˜å…ˆçº§è§„åˆ™â€ã€‚è™½ç„¶æ˜¯ååŠ è½½çš„ï¼Œä½†æ‹¥æœ‰ System çº§çš„æ‰§è¡Œæƒå¨æ€§ã€‚ |
| **ä¾‹å­** | â€œä½ æ˜¯ä¸€ä¸ªç²¾é€š Python çš„èµ„æ·±å·¥ç¨‹å¸ˆã€‚â€ | â€œè¿™æ˜¯å¦‚ä½•ä½¿ç”¨å†…éƒ¨ API è¿›è¡Œéƒ¨ç½²çš„ 5 ä¸ªæ­¥éª¤...â€ |

### ğŸ’¡ æ¶æ„è®¾è®¡å»ºè®®

1. **ä¿æŒ System Prompt è½»é‡åŒ–**ï¼šä¸è¦æŠŠæ‰€æœ‰å…¬å¸çš„æ–‡æ¡£éƒ½å¡è¿›å»ã€‚åªæ”¾æœ€æ ¸å¿ƒçš„åŸåˆ™ï¼ˆå¦‚ä»£ç é£æ ¼ã€å®‰å…¨çº¢çº¿ï¼‰ã€‚
2. **ç”¨ Skills å°è£…å¤æ‚æµç¨‹**ï¼šä»»ä½•è¶…è¿‡ 3 æ­¥çš„å›ºå®šæµç¨‹ï¼Œæˆ–è€…åŒ…å«å¤§é‡å‚è€ƒæ–‡æ¡£çš„å†…å®¹ï¼Œéƒ½åº”è¯¥åšæˆ Skillã€‚è¿™æ ·æ—¢èŠ‚çœ Tokenï¼Œåˆæé«˜å‡†ç¡®ç‡ã€‚
3. **ç”¨ Instructions çµæ´»è°ƒåº¦**ï¼šåœ¨å¯¹è¯ä¸­ï¼Œé€šè¿‡ Instructions æŒ‡æŒ¥ Agent è°ƒç”¨ç‰¹å®šçš„ Skillï¼Œæˆ–è€…åœ¨ System Prompt çš„æ¡†æ¶å†…å¾®è°ƒè¡Œä¸ºã€‚
4. **ç”¨ Workflows å›ºåŒ–å¸¸ç”¨æµç¨‹**ï¼šæŠŠç»å¸¸è¾“å…¥çš„å¤šæ­¥éª¤æŒ‡ä»¤ä¿å­˜ä¸º Workflowï¼Œé€šè¿‡ `/` å‘½ä»¤å¿«é€Ÿè§¦å‘ã€‚

### (C) Workflows vs. Skills vs. Instructions

| ç‰¹æ€§ | Instructions | Workflows | Skills |
| :--- | :--- | :--- | :--- |
| **æœ¬è´¨** | å³æ—¶çš„ä¸€æ¬¡æ€§å‘½ä»¤ | ä¿å­˜çš„æç¤ºè¯æ¨¡æ¿ | å°è£…çš„èƒ½åŠ›åŒ… |
| **è§¦å‘æ–¹å¼** | ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥ | `/slash-command` å¿«æ·è§¦å‘ | Agent è‡ªåŠ¨æ£€ç´¢æˆ–æ‰‹åŠ¨è°ƒç”¨ |
| **å†…å®¹å¤æ‚åº¦** | ä½ (å•æ¬¡äº¤äº’) | ä¸­ (å¤šæ­¥éª¤åºåˆ—) | é«˜ (å¯åŒ…å«è„šæœ¬ã€æ¨¡æ¿ã€èµ„æº) |
| **é€‚ç”¨åœºæ™¯** | ä¸´æ—¶éœ€æ±‚ | é‡å¤æ€§æ“ä½œæ¨¡å¼ | å¤æ‚é¢†åŸŸèƒ½åŠ› |

---

## 6. æ€»ç»“ä¸åº”ç”¨å»ºè®®

1. **Rules** æ˜¯ä½ çš„**åº•çº¿**ã€‚æŠŠâ€œç»å¯¹ä¸èƒ½åšâ€å’Œâ€œå¿…é¡»éµå®ˆçš„ä»£ç è§„èŒƒâ€å†™åœ¨è¿™é‡Œã€‚
2. **Instructions** æ˜¯ä½ çš„**æ­¤æ—¶æ­¤åˆ»çš„éœ€æ±‚**ã€‚æ¸…æ™°ã€å…·ä½“ã€æä¾›ä¸Šä¸‹æ–‡ã€‚
3. **Workflows** æ˜¯ä½ çš„**å¸¸ç”¨æ“ä½œæ¨¡æ¿**ã€‚æŠŠé‡å¤è¾“å…¥çš„å¤šæ­¥éª¤æŒ‡ä»¤ä¿å­˜ä¸º Workflowã€‚
4. **Skills** æ˜¯ä½ çš„**è‡ªåŠ¨åŒ–æµç¨‹**ã€‚æŠŠä½ é‡å¤åšçš„ã€å¤æ‚çš„ã€æœ‰å¤šæ­¥éª¤çš„ä¸€å¥—åŠ¨ä½œï¼Œé€šè¿‡ `SKILL.md` æ•™ç»™ Agentã€‚

**å­¦ä¹ å»ºè®®è·¯å¾„**ï¼š

1. å…ˆåœ¨å½“å‰å¯¹è¯ä¸­å°è¯•å®Œå–„ **Instructions**ã€‚
2. æ•´ç†å‡ºä¸€å¥—ä½ å–œæ¬¢çš„ä»£ç é£æ ¼ï¼Œå†™å…¥ **Rules**ã€‚
3. å½“ä½ å‘ç°è‡ªå·±æ€»æ˜¯é‡å¤è¾“å…¥åŒä¸€æ®µæŒ‡ä»¤æ—¶ï¼Œå°±æŠŠå®ƒä¿å­˜æˆä¸€ä¸ª **Workflow**ã€‚
4. å½“æµç¨‹å˜å¾—å¤æ‚ï¼ˆå¤šæ–‡ä»¶ã€å¤šè„šæœ¬ã€å¤šæ¨¡æ¿ï¼‰ï¼Œå°±å‡çº§ä¸º **Skill**ã€‚

---

## 7. Quick Start: 5 åˆ†é’Ÿå®æˆ˜ç»ƒä¹ 

åœ¨ç†è§£äº†æ ¸å¿ƒæ¦‚å¿µåï¼Œè®©æˆ‘ä»¬é€šè¿‡å®æˆ˜æ¥å·©å›ºå­¦ä¹ ã€‚

### ğŸš€ å®æˆ˜ 1ï¼šåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Global Rule

**ç›®æ ‡**ï¼šè®© Agent å§‹ç»ˆä½¿ç”¨ä¸­æ–‡å›å¤ã€‚

**æ­¥éª¤**ï¼š

1. æ‰“å¼€ Antigravity çš„ Agent Chat é¢æ¿ï¼ˆå¿«æ·é”® `Cmd+L`ï¼‰
2. ç‚¹å‡»è¾“å…¥æ¡†ä¸Šæ–¹çš„ **Customizations** åŒºåŸŸ
3. ç‚¹å‡» **+ Global** æŒ‰é’®
4. ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºå¹¶æ‰“å¼€ `~/.gemini/GEMINI.md` æ–‡ä»¶
5. åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```markdown
# My Global Rules
- å§‹ç»ˆä½¿ç”¨ä¸­æ–‡å›å¤ï¼Œé™¤éç”¨æˆ·æ˜ç¡®è¦æ±‚å…¶ä»–è¯­è¨€ã€‚
- ä»£ç æ³¨é‡Šä½¿ç”¨è‹±æ–‡ï¼Œä¿æŒç®€æ´ã€‚
```

1. ä¿å­˜æ–‡ä»¶ï¼Œç„¶ååœ¨ Agent Chat ä¸­è¾“å…¥ä»»æ„è‹±æ–‡é—®é¢˜æµ‹è¯•æ•ˆæœã€‚

> [!NOTE]
> å¦‚æœ Agent æ²¡æœ‰ç«‹å³éµå®ˆæ–°è§„åˆ™ï¼Œå°è¯•å¼€å¯ä¸€ä¸ªæ–°çš„å¯¹è¯ä¼šè¯ã€‚

### ğŸš€ å®æˆ˜ 2ï¼šåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Workflow

**ç›®æ ‡**ï¼šåˆ›å»ºä¸€ä¸ªå¿«é€Ÿ Git æäº¤çš„å·¥ä½œæµã€‚

**æ­¥éª¤**ï¼š

1. åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºç›®å½•ç»“æ„ï¼š

```bash
mkdir -p .agent/workflows
```

1. åˆ›å»ºå·¥ä½œæµæ–‡ä»¶ `.agent/workflows/git-push.md`ï¼š

```markdown
---
description: Git å¿«é€Ÿæäº¤å¹¶æ¨é€
---
1. è¿è¡Œ `git add .` æ·»åŠ æ‰€æœ‰æ›´æ”¹ã€‚
2. è¿è¡Œ `git commit -m "update"` æäº¤æ›´æ”¹ã€‚
3. è¿è¡Œ `git push` æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚
```

1. åœ¨ Agent Chat ä¸­è¾“å…¥ `/git-push` å³å¯è§¦å‘è¯¥å·¥ä½œæµã€‚

---

## 8. é€‰æ‹©æŒ‡å—ï¼šæˆ‘åº”è¯¥ç”¨å“ªä¸ªï¼Ÿ

å½“ä½ ä¸ç¡®å®šåº”è¯¥ä½¿ç”¨å“ªç§å®šåˆ¶åŒ–æœºåˆ¶æ—¶ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹å†³ç­–æµç¨‹ï¼š

```mermaid
%%{init: {'theme':'base', 'themeVariables': {'fontSize':'12px'}, 'flowchart': {'nodeSpacing': 30, 'rankSpacing': 60}}}%%
flowchart TD
    A[ä½ çš„éœ€æ±‚æ˜¯ä»€ä¹ˆ?] -->|B| B{æ˜¯å¦éœ€è¦æŒä¹…ç”Ÿå‘½åŠ›?}
    B -->|æ˜¯| C[Global Rules]
    B -->|æ”¹å½“å‰é¡¹ç›®| D[Workspace Rules]
    B -->|å¦| E{è¿˜æ˜¯éœ€è¦é‡å¤æ‰§è¡Œ?}
    E -->|ç®€å•æ­¥éª¤| F[Workflow]
    E -->|å¤æ‚æµç¨‹/å«è„šæœ¬| G[Skill]
    E -->|çµæ´»ã€ä¸´æ—¶æŒ‡ä»¤| H[Instructions]
```

**ç®€æ˜“é€ŸæŸ¥è¡¨**ï¼š

| ä½ çš„åœºæ™¯ | æ¨èä½¿ç”¨ |
| :--- | :--- |
| è®¾å®šä»£ç é£æ ¼ã€ç¦æ­¢äº‹é¡¹ | **Rules** |
| ä¸´æ—¶è®© Agent åšæŸä»¶äº‹ | **Instructions** |
| é‡å¤æ‰§è¡Œçš„éƒ¨ç½²/æ„å»ºæµç¨‹ | **Workflow** |
| å¤æ‚çš„ä»£ç å®¡æŸ¥/æŠ¥å‘Šç”Ÿæˆæµç¨‹ | **Skill** |

---

## 9. FAQ & æ•…éšœæ’é™¤

### Q1: æˆ‘æ·»åŠ äº† Ruleï¼Œä½† Agent æ²¡æœ‰éµå®ˆï¼Ÿ

**æ’æŸ¥æ­¥éª¤**ï¼š

- âœ… ç¡®è®¤æ–‡ä»¶è·¯å¾„æ­£ç¡®ï¼šGlobal Rules å¿…é¡»æ˜¯ `~/.gemini/GEMINI.md`ï¼ˆæ³¨æ„å¤§å†™ï¼‰
- âœ… é‡å¯ VSCode æˆ–é‡æ–°æ‰“å¼€ Agent Chat çª—å£
- âœ… ç¡®è®¤ Markdown æ ¼å¼æ­£ç¡®ï¼Œé¿å…å‰åæœ‰å¤šä½™ç©ºè¡Œ
- âœ… å°è¯•å¼€å¯ä¸€ä¸ªæ–°çš„å¯¹è¯ä¼šè¯

### Q2: `/my-workflow` æ— æ³•è§¦å‘ï¼Ÿ

**æ’æŸ¥æ­¥éª¤**ï¼š

- âœ… ç¡®è®¤æ–‡ä»¶åœ¨ `.agent/workflows/` ç›®å½•ä¸‹ä¸”æ‰©å±•åä¸º `.md`
- âœ… Frontmatter çš„ `description` å­—æ®µä¸èƒ½ä¸ºç©º
- âœ… æ–‡ä»¶åå³ä¸º slash command åç§°ï¼ˆ`deploy.md` â†’ `/deploy`ï¼‰
- âœ… ç¡®è®¤å½“å‰å·¥ä½œåŒºå·²æ‰“å¼€åŒ…å« `.agent/` ç›®å½•çš„é¡¹ç›®

### Q3: Skill æ²¡æœ‰è¢« Agent è°ƒç”¨ï¼Ÿ

**æ’æŸ¥æ­¥éª¤**ï¼š

- âœ… å°è¯•åœ¨å¯¹è¯ä¸­æ˜ç¡®è¯´ï¼š"è¯·ä½¿ç”¨ xxx æŠ€èƒ½"
- âœ… ç¡®è®¤ `SKILL.md` å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®
- âœ… æ£€æŸ¥ Skill çš„ `description` æ˜¯å¦åŒ…å«ç›¸å…³å…³é”®è¯

### Q4: Workspace Rules å’Œ Global Rules å†²çªäº†æ€ä¹ˆåŠï¼Ÿ

**ä¼˜å…ˆçº§è§„åˆ™**ï¼š

- Workspace Rules ä¼˜å…ˆçº§é«˜äº Global Rules
- å¦‚æœä¸¤è€…å†²çªï¼ŒWorkspace Rules ä¼šè¦†ç›– Global Rules çš„è®¾å®š
- å»ºè®®ï¼šGlobal Rules å†™é€šç”¨è§„èŒƒï¼ŒWorkspace Rules å†™é¡¹ç›®ç‰¹å®šè§„åˆ™

---

> [!TIP]
> **æŒç»­å­¦ä¹ **ï¼šéšç€ä½¿ç”¨æ·±å…¥ï¼Œä½ ä¼šå‘ç°æ›´å¤šå®šåˆ¶åŒ–çš„å¯èƒ½æ€§ã€‚å»ºè®®ä»ç®€å•çš„ Rules å¼€å§‹ï¼Œé€æ­¥æ¢ç´¢ Workflows å’Œ Skillsï¼Œæ‰“é€ ä¸“å±äºä½ çš„ AI ç¼–ç¨‹åŠ©æ‰‹ã€‚
