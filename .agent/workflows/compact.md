---
description: Session ä¸Šä¸‹æ–‡å‹ç¼© - å°†å½“å‰ä¼šè¯çš„æ ¸å¿ƒä¸Šä¸‹æ–‡å‹ç¼©ä¸º Checkpoint æ–‡ä»¶ï¼Œæ”¯æŒè·¨ Session æ¢å¤
---

# Session Context Compact å·¥ä½œæµ

å°†å½“å‰ Antigravity Session çš„å®Œæ•´å·¥ä½œä¸Šä¸‹æ–‡å‹ç¼©ä¸ºä¸€ä»½ç»“æ„åŒ–çš„ Checkpoint æ–‡ä»¶ï¼Œä¿å­˜è‡³ `~/Obsidian/agent-sessions/checkpoints/` ç›®å½•ã€‚

## 0. è·å– Session åç§°

**è¯¢é—®ç”¨æˆ·**æä¾›ä¸€ä¸ªç®€çŸ­çš„ `{session-name}`ï¼ˆè‹±æ–‡ï¼Œkebab-caseï¼Œå¦‚ `tsm-deep-dive` æˆ– `openclaw-refactor`ï¼‰ã€‚
å¦‚æœç”¨æˆ·åœ¨è§¦å‘ `/compact` æ—¶å·²ç»é™„å¸¦äº†åç§°ï¼ˆå¦‚ `/compact tsm-analysis`ï¼‰ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ã€‚

## 1. æ”¶é›†ä¸Šä¸‹æ–‡ä¿¡æ¯

ä»ä»¥ä¸‹æ¥æºæ”¶é›†å½“å‰ Session çš„å…¨éƒ¨æ ¸å¿ƒä¿¡æ¯ï¼š

### 1.1 ä»»åŠ¡çŠ¶æ€ (Task State)

- è¯»å–å½“å‰ `task.md` æ–‡ä»¶ï¼ˆä½äº `~/.gemini/antigravity/brain/<å½“å‰conversation-id>/task.md`ï¼‰
- æå–æ‰€æœ‰ä»»åŠ¡æ¡ç›®åŠå…¶å®ŒæˆçŠ¶æ€ `[x]` / `[/]` / `[ ]`

### 1.2 å·¥ä½œç›®å½•ä¸æ–‡ä»¶ (Working Context)

- **å·¥ä½œåŒºæ ¹ç›®å½•**: `~/Obsidian`
- **æ´»è·ƒæ–‡ä»¶**: åˆ—å‡ºæœ¬æ¬¡ Session ä¸­**åˆ›å»º**æˆ–**ä¿®æ”¹**è¿‡çš„æ‰€æœ‰æ–‡ä»¶çš„**ç»å¯¹è·¯å¾„**
- **å…³é”®å¼•ç”¨æ–‡ä»¶**: åˆ—å‡ºæœ¬æ¬¡ Session ä¸­**è¯»å–**è¿‡ä½†æœªä¿®æ”¹çš„é‡è¦å‚è€ƒæ–‡ä»¶

### 1.3 æ ¸å¿ƒå¯¹è¯æ‘˜è¦ (Conversation Summary)

å›é¡¾æ•´ä¸ªå¯¹è¯å†å²ï¼Œæå–ï¼š

- **ç”¨æˆ·çš„åŸå§‹éœ€æ±‚**: ç”¨æˆ·æœ€åˆè¦æ±‚åšä»€ä¹ˆï¼Ÿ
- **å…³é”®æŠ€æœ¯å†³ç­–**: Session ä¸­åšäº†å“ªäº›é‡è¦çš„æŠ€æœ¯é€‰å‹æˆ–æ¶æ„å†³å®šï¼Ÿ
- **é‡è¦å‘ç°ä¸æ´å¯Ÿ**: è°ƒç ”æˆ–å¼€å‘è¿‡ç¨‹ä¸­å‘ç°äº†å“ªäº›å…³é”®ä¿¡æ¯ï¼Ÿ
- **é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ**: æ˜¯å¦æœ‰ Bugã€æŠ¥é”™æˆ–æ„å¤–æƒ…å†µï¼Ÿå¦‚ä½•è§£å†³çš„ï¼Ÿ

### 1.4 æœªå®Œæˆäº‹é¡¹ (Pending Items)

- ä» `task.md` ä¸­æå–æ‰€æœ‰ `[ ]` å’Œ `[/]` çŠ¶æ€çš„ä»»åŠ¡
- ä»å¯¹è¯ä¸­æå–ç”¨æˆ·æåˆ°ä½†å°šæœªæ‰§è¡Œçš„éœ€æ±‚
- æ˜ç¡®è®°å½•"ä¸‹ä¸€æ­¥åº”è¯¥åšä»€ä¹ˆ"

## 2. ç”Ÿæˆ Checkpoint æ–‡ä»¶

å°†æ”¶é›†åˆ°çš„ä¿¡æ¯å†™å…¥ä»¥ä¸‹è·¯å¾„ï¼š

```text
~/Obsidian/agent-sessions/checkpoints/{session-name}-checkpoint.md
```

æ–‡ä»¶å†…å®¹å¿…é¡»ä¸¥æ ¼éµå¾ªä»¥ä¸‹æ¨¡æ¿ï¼š

```markdown
# Session Checkpoint: {session-name}

> **Created**: {å½“å‰æ—¥æœŸæ—¶é—´ï¼ŒISO 8601 æ ¼å¼}
> **Original Conversation ID**: {å½“å‰ conversation-id}
> **Status**: {Completed | In Progress | Paused}

## 1. åŸå§‹éœ€æ±‚ (Original Request)

{ç”¨ç®€æ´çš„ä¸­æ–‡æè¿°ç”¨æˆ·æœ€åˆçš„éœ€æ±‚ï¼Œä¿ç•™å…³é”®è‹±æ–‡æœ¯è¯­}

## 2. ä»»åŠ¡å®Œæˆåº¦ (Task Progress)

{ä» task.md å¤åˆ¶å®Œæ•´çš„ä»»åŠ¡åˆ—è¡¨ï¼Œä¿æŒåŸå§‹çš„ checkbox çŠ¶æ€}

## 3. å…³é”®å†³ç­–ä¸å‘ç° (Key Decisions & Findings)

{æŒ‰æ—¶é—´é¡ºåºï¼Œä»¥"- **å†³ç­–/å‘ç°**: åŸå› /ç»†èŠ‚"çš„æ ¼å¼åˆ—å‡º}

## 4. å·¥ä½œæ–‡ä»¶æ¸…å• (File Manifest)

### å·²åˆ›å»º/ä¿®æ”¹çš„æ–‡ä»¶
| æ–‡ä»¶è·¯å¾„ | æ“ä½œ | è¯´æ˜ |
|---------|------|------|
| {ç»å¯¹è·¯å¾„} | Created / Modified | {ç®€è¦æè¿°} |

### å…³é”®å¼•ç”¨æ–‡ä»¶
- {ç»å¯¹è·¯å¾„}: {ä¸ºä»€ä¹ˆé‡è¦}

## 5. æœªå®Œæˆäº‹é¡¹ä¸åç»­è®¡åˆ’ (Next Steps)

{æŒ‰ä¼˜å…ˆçº§æ’åˆ—ï¼Œæ˜ç¡®æè¿°æ¯ä¸ªå¾…åŠäº‹é¡¹çš„å…·ä½“å†…å®¹}

1. {æœ€é«˜ä¼˜å…ˆçº§çš„ä¸‹ä¸€æ­¥}
2. {æ¬¡é«˜ä¼˜å…ˆçº§}
3. ...

## 6. æ¢å¤æŒ‡å¼• (Restoration Guide)

åœ¨æ–°çš„ Antigravity Session ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹ Prompt æ¢å¤ä¸Šä¸‹æ–‡ï¼š

> è¯·è¯»å– @[agent-sessions/checkpoints/{session-name}-checkpoint.md] æ¢å¤å·¥ä½œä¸Šä¸‹æ–‡ï¼Œå¹¶ä»ã€Œæœªå®Œæˆäº‹é¡¹ã€çš„ç¬¬ 1 é¡¹ç»§ç»­æ‰§è¡Œã€‚
```

## 3. å®Œæˆé€šçŸ¥

ç”Ÿæˆ Checkpoint æ–‡ä»¶åï¼Œå‘ç”¨æˆ·å‘é€ä»¥ä¸‹æç¤ºï¼š

---

âœ… **Session ä¸Šä¸‹æ–‡å·²å‹ç¼©ä¿å­˜**

ğŸ“„ Checkpoint æ–‡ä»¶: `agent-sessions/checkpoints/{session-name}-checkpoint.md`

ğŸ”„ **å¦‚ä½•åœ¨æ–° Session ä¸­æ¢å¤ï¼š**

1. å…³é—­å½“å‰ Sessionï¼ˆæˆ–æ–°å»ºä¸€ä¸ª Chatï¼‰
2. åœ¨æ–° Session ä¸­å‘é€ä»¥ä¸‹ Promptï¼š

```text
è¯·è¯»å– @[agent-sessions/checkpoints/{session-name}-checkpoint.md] æ¢å¤å·¥ä½œä¸Šä¸‹æ–‡ï¼Œå¹¶ä»ã€Œæœªå®Œæˆäº‹é¡¹ã€çš„ç¬¬ 1 é¡¹ç»§ç»­æ‰§è¡Œã€‚
```

> [!TIP]
> å¦‚æœåªéœ€è¦æŸ¥çœ‹è¿›åº¦è€Œä¸ç»§ç»­å·¥ä½œï¼Œå¯ä»¥ç›´æ¥åœ¨ Obsidian ä¸­æ‰“å¼€ Checkpoint æ–‡ä»¶é˜…è¯»ã€‚

---
